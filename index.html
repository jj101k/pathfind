<!DOCTYPE html>
<html>
    <head>
        <title>Pathfinding test</title>
        <style type="text/css">
            #grid {
                border: 1px solid black;
                width: 400px;
                height: 400px;
                margin-left: auto;
                margin-right: auto;
                display: inline-block;
            }
        </style>
    </head>
    <body>
        <table style="width: 300px; float: right">
            <thead>
                <tr>
                    <th>Test</th>
                    <th>Result</th>
                    <th>Runtime (ms)</th>
                    <th>Expected</th>
                </tr>
            </thead>
            <tbody id="test-results">

            </tbody>
        </table>
        <canvas id="grid"></canvas>
        <p>Import .wasm core <input type="file" id="wasm-import"/></p>
        <p><label>Random size <input id="test-size" type="number"
        value="200"/></label></p>
        <p><label>Obstruction density <input id="density" type="number" min="0"
        max="0.5" step="0.1" value="0.5"/></label></p>
        <p><label><input type="checkbox" onchange="t.randomCornerToCorner = this.checked" checked>Random is corner-to-corner</label></p>
        <p><label>Test <input id="test-number" type="number" value=""/></label></p>
        <p><label><input type="checkbox" onchange="t.paused = this.checked">Pause</label></p>
        <p><label><input type="checkbox" onchange="t.blind = this.checked">Disable display updates</label></p>
        <p>
            <button type="button" onclick="t.step()">Step</button>
            <button type="button" onclick="t.nextTest()">Next test</button>
            <button type="button" onclick="t.randomTest(size)">Random test</button>
            <button type="button" onclick="t.nullTest(size)">Null test</button>
            <button type="button" onclick="t.runAll()">All tests</button>
        </p>
        <script src="index.js"></script>
        <script src="GridMap.js"></script>
        <script src="PositionedNode.js"></script>
        <script src="RouteStepper.js"></script>
        <script src="PathNode.js"></script>
        <script src="Route.js"></script>
        <script src="GridTest.js"></script>
        <script src="core.js"></script>
        <script src="test.js"></script>
        <script src="self-test.js"></script>
        <script>
            let t = new GridTest()
            let size = document.querySelector("#test-size").value
            t.tests = PathTests
            t.randomTest(size)
            t.density = document.querySelector("#density").value
            document.querySelector("#density").onchange = function() {
                t.density = this.value
            }
            document.querySelector("#test-number").onchange = function() {
                t.selectTest(this.value)
            }
            document.querySelector("#test-size").onchange = function() {
                size = this.value
            }
        </script>
    </body>
</html>